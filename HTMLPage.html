<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title> socket.io :: room </title>
    <link rel="shortcut icon" href="http://www.e-mirim.hs.kr/favicon.ico" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        $(document).ready(function(){
            var socket = io.connect();

            socket.on('outputMsg', function(data){
                var html = '';
                html += '<li>';
                html += '   <strong class="name">' + data.name + '</strong>';
                html += '   <p class="msg">' + data.message + '</p>';
                html += '   <span class="date">' + data.date + '</p>';
                html += '</li>';
                $(html).prependTo('#content');
            });

            $("#btnSend").on("click", function(){
                var usrName = $("#usrName").val();
                var usrMsg = $("#usrMsg").val();
                if( usrName && usrMsg ){
                    socket.emit('sendMsg', {
                        name: usrName,
                        message: usrMsg,
                        date: new Date().toUTCString()
                    });
                } else {
                    alert('닉네임이나 메시지를 입력해주세요.');
                }
            });
        });
    </script>
</head>
<body>
    <h1>socket.io Web Chatting</h1>
    <p>Chat With Node.js</p>
    <hr / />
    <input type="text" id="usrName" placeholder="닉네임" />
    <input type="text" id="usrMsg" placeholder="메시지" />
    <button type="button" id="btnSend">전송</button>
    <ul id="content">
    </ul>
</body>
</html>
